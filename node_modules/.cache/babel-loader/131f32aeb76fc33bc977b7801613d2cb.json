{"ast":null,"code":"import'./App.css';import*as THREE from'three';import{OrbitControls}from'three/examples/jsm/controls/OrbitControls';import{Canvas,extend,useFrame,useLoader,useThree}from'react-three-fiber';import circleImg from'./assets/circle.png';import{Suspense,useCallback,useMemo,useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";extend({OrbitControls:OrbitControls});function CameraControls(){var _useThree=useThree(),camera=_useThree.camera,domElement=_useThree.gl.domElement;var controlsRef=useRef();useFrame(function(){return controlsRef.current.update();});return/*#__PURE__*/_jsx(\"orbitControls\",{ref:controlsRef,args:[camera,domElement],autoRotate:true,autoRotateSpeed:-0.2});}function Points(){var imgTex=useLoader(THREE.TextureLoader,circleImg);var bufferRef=useRef();var t=0;var f=0.002;var a=3;var graph=useCallback(function(x,z){return Math.sin(f*(Math.pow(x,2)+Math.pow(z,2)+t))*a;},[t,f,a]);var count=100;var sep=3;var positions=useMemo(function(){var positions=[];for(var xi=0;xi<count;xi++){for(var zi=0;zi<count;zi++){var x=sep*(xi-count/2);var z=sep*(zi-count/2);var y=graph(x,z);positions.push(x,y,z);}}return new Float32Array(positions);},[count,sep,graph]);useFrame(function(){t+=15;var positions=bufferRef.current.array;var i=0;for(var xi=0;xi<count;xi++){for(var zi=0;zi<count;zi++){var x=sep*(xi-count/2);var z=sep*(zi-count/2);positions[i+1]=graph(x,z);i+=3;}}bufferRef.current.needsUpdate=true;});return/*#__PURE__*/_jsxs(\"points\",{children:[/*#__PURE__*/_jsx(\"bufferGeometry\",{attach:\"geometry\",children:/*#__PURE__*/_jsx(\"bufferAttribute\",{ref:bufferRef,attachObject:['attributes','position'],array:positions,count:positions.length/3,itemSize:3})}),/*#__PURE__*/_jsx(\"pointsMaterial\",{attach:\"material\",map:imgTex,color:0x00AAFF,size:0.5,sizeAttenuation:true,transparent:false,alphaTest:0.5,opacity:1.0})]});}function AnimationCanvas(){return/*#__PURE__*/_jsxs(Canvas,{colorManagement:false,camera:{position:[100,10,0],fov:75},children:[/*#__PURE__*/_jsx(Suspense,{fallback:null,children:/*#__PURE__*/_jsx(Points,{})}),/*#__PURE__*/_jsx(CameraControls,{})]});}function App(){return/*#__PURE__*/_jsx(\"div\",{className:\"anim\",children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(AnimationCanvas,{})})});}export default App;","map":{"version":3,"sources":["/media/Files-2/Bckup 17/Programing/3JS/3d-ripple-animation/src/App.js"],"names":["THREE","OrbitControls","Canvas","extend","useFrame","useLoader","useThree","circleImg","Suspense","useCallback","useMemo","useRef","CameraControls","camera","domElement","gl","controlsRef","current","update","Points","imgTex","TextureLoader","bufferRef","t","f","a","graph","x","z","Math","sin","count","sep","positions","xi","zi","y","push","Float32Array","array","i","needsUpdate","length","AnimationCanvas","position","fov","App"],"mappings":"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","sourcesContent":["import './App.css';\nimport * as THREE from 'three';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\nimport { Canvas, extend, useFrame, useLoader, useThree } from 'react-three-fiber';\nimport circleImg from './assets/circle.png';\nimport { Suspense, useCallback, useMemo, useRef } from 'react';\nextend({OrbitControls})\n\nfunction CameraControls(){\n  const {\n    camera,\n    gl: {domElement}\n  } = useThree();\n\n  const controlsRef = useRef();\n  useFrame(() => controlsRef.current.update())\n\n  return (\n    <orbitControls\n      ref={controlsRef}\n      args={[camera, domElement]}\n      autoRotate\n      autoRotateSpeed={-0.2}\n    />\n  );\n}\n\nfunction Points() {\n  const imgTex = useLoader(THREE.TextureLoader, circleImg);\n  const bufferRef = useRef();\n\n  let t = 0;\n  let f = 0.002;\n  let a = 3;\n  const graph = useCallback((x, z) => {\n    return Math.sin(f * (x ** 2 + z ** 2 + t)) * a;\n  }, [t, f, a])\n\n  const count = 100\n  const sep = 3\n  let positions = useMemo(() => {\n    let positions = []\n\n    for (let xi = 0; xi < count; xi++) {\n      for (let zi = 0; zi < count; zi++) {\n        let x = sep * (xi - count / 2);\n        let z = sep * (zi - count / 2);\n        let y = graph(x, z);\n        positions.push(x, y, z);\n      }\n    }\n\n    return new Float32Array(positions);\n  }, [count, sep, graph])\n\n  useFrame(() => {\n    t += 15\n    \n    const positions = bufferRef.current.array;\n\n    let i = 0;\n    for (let xi = 0; xi < count; xi++) {\n      for (let zi = 0; zi < count; zi++) {\n        let x = sep * (xi - count / 2);\n        let z = sep * (zi - count / 2);\n\n        positions[i + 1] = graph(x, z);\n        i += 3;\n      }\n    }\n\n    bufferRef.current.needsUpdate = true;\n  })\n\n  return (\n    <points>\n      <bufferGeometry attach=\"geometry\">\n        <bufferAttribute\n          ref={bufferRef}\n          attachObject={['attributes', 'position']}\n          array={positions}\n          count={positions.length / 3}\n          itemSize={3}\n        />\n      </bufferGeometry>\n\n      <pointsMaterial\n        attach=\"material\"\n        map={imgTex}\n        color={0x00AAFF}\n        size={0.5}\n        sizeAttenuation\n        transparent={false}\n        alphaTest={0.5}\n        opacity={1.0}\n      />\n    </points>\n  );\n}\n\nfunction AnimationCanvas() {\n  return (\n    <Canvas\n      colorManagement={false}\n      camera={{ position: [100, 10, 0], fov: 75 }}\n    >\n      <Suspense fallback={null}>\n        <Points />\n      </Suspense>\n      <CameraControls/>\n    </Canvas>\n  );\n}\n\n\nfunction App() {\n  return (\n    <div className=\"anim\">\n      <Suspense fallback={<div>Loading...</div>}>\n        <AnimationCanvas />\n      </Suspense>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}