{"ast":null,"code":"var _jsxFileName = \"/media/Files-2/Bckup 17/Programing/3JS/3d-ripple-animation/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './App.css';\nimport * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { Canvas, extend, useFrame, useLoader, useThree } from 'react-three-fiber';\nimport circleImg from './assets/circle.png';\nimport { Suspense, useCallback, useMemo, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nextend({\n  OrbitControls\n});\n\nfunction CameraControls() {\n  _s();\n\n  const {\n    camera,\n    gl: {\n      domElement\n    }\n  } = useThree();\n  const controlsRef = useRef();\n  useFrame(() => controlsRef.current.update());\n  return /*#__PURE__*/_jsxDEV(\"orbitControls\", {\n    ref: controlsRef,\n    args: [camera, domElement],\n    autoRotate: true,\n    autoRotateSpeed: -0.2\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CameraControls, \"OfZJ3lY+8UowfJQr79ITTGaLLH4=\", false, function () {\n  return [useThree, useFrame];\n});\n\n_c = CameraControls;\n\nfunction Points() {\n  _s2();\n\n  const imgTex = useLoader(THREE.TextureLoader, circleImg);\n  const bufferRef = useRef();\n  let t = 0;\n  let f = 0.002;\n  let a = 3;\n  const graph = useCallback((x, z) => {\n    return Math.sin(f * (x ** 2 + z ** 2 + t)) * a;\n  }, [t, f, a]);\n  const count = 100;\n  const sep = 3;\n  let positions = useMemo(() => {\n    let positions = [];\n\n    for (let xi = 0; xi < count; xi++) {\n      for (let zi = 0; zi < count; zi++) {\n        let x = sep * (xi - count / 2);\n        let z = sep * (zi - count / 2);\n        let y = graph(x, z);\n        positions.push(x, y, z);\n      }\n    }\n\n    return new Float32Array(positions);\n  }, [count, sep, graph]);\n  useFrame(() => {\n    t += 15;\n    const positions = bufferRef.current.array;\n    let i = 0;\n\n    for (let xi = 0; xi < count; xi++) {\n      for (let zi = 0; zi < count; zi++) {\n        let x = sep * (xi - count / 2);\n        let z = sep * (zi - count / 2);\n        positions[i + 1] = graph(x, z);\n        i += 3;\n      }\n    }\n\n    bufferRef.current.needsUpdate = true;\n  });\n  return /*#__PURE__*/_jsxDEV(\"points\", {\n    children: [/*#__PURE__*/_jsxDEV(\"bufferGeometry\", {\n      attach: \"geometry\",\n      children: /*#__PURE__*/_jsxDEV(\"bufferAttribute\", {\n        ref: bufferRef,\n        attachObject: ['attributes', 'position'],\n        array: positions,\n        count: positions.length / 3,\n        itemSize: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pointsMaterial\", {\n      attach: \"material\",\n      map: imgTex,\n      color: AAFF00,\n      size: 0.5,\n      sizeAttenuation: true,\n      transparent: false,\n      alphaTest: 0.5,\n      opacity: 1.0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Points, \"ZFKK6XaFpefMvNhgNO6lHhsFqmc=\", false, function () {\n  return [useLoader, useFrame];\n});\n\n_c2 = Points;\n\nfunction AnimationCanvas() {\n  return /*#__PURE__*/_jsxDEV(Canvas, {\n    colorManagement: false,\n    camera: {\n      position: [100, 10, 0],\n      fov: 75\n    },\n    children: [/*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: null,\n      children: /*#__PURE__*/_jsxDEV(Points, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CameraControls, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n\n_c3 = AnimationCanvas;\n\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"anim\",\n    children: /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 27\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(AnimationCanvas, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_c4 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"CameraControls\");\n$RefreshReg$(_c2, \"Points\");\n$RefreshReg$(_c3, \"AnimationCanvas\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"sources":["/media/Files-2/Bckup 17/Programing/3JS/3d-ripple-animation/src/App.js"],"names":["THREE","OrbitControls","Canvas","extend","useFrame","useLoader","useThree","circleImg","Suspense","useCallback","useMemo","useRef","CameraControls","camera","gl","domElement","controlsRef","current","update","Points","imgTex","TextureLoader","bufferRef","t","f","a","graph","x","z","Math","sin","count","sep","positions","xi","zi","y","push","Float32Array","array","i","needsUpdate","length","AAFF00","AnimationCanvas","position","fov","App"],"mappings":"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","sourcesContent":["import './App.css';\nimport * as THREE from 'three';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\nimport { Canvas, extend, useFrame, useLoader, useThree } from 'react-three-fiber';\nimport circleImg from './assets/circle.png';\nimport { Suspense, useCallback, useMemo, useRef } from 'react';\nextend({OrbitControls})\n\nfunction CameraControls(){\n  const {\n    camera,\n    gl: {domElement}\n  } = useThree();\n\n  const controlsRef = useRef();\n  useFrame(() => controlsRef.current.update())\n\n  return (\n    <orbitControls\n      ref={controlsRef}\n      args={[camera, domElement]}\n      autoRotate\n      autoRotateSpeed={-0.2}\n    />\n  );\n}\n\nfunction Points() {\n  const imgTex = useLoader(THREE.TextureLoader, circleImg);\n  const bufferRef = useRef();\n\n  let t = 0;\n  let f = 0.002;\n  let a = 3;\n  const graph = useCallback((x, z) => {\n    return Math.sin(f * (x ** 2 + z ** 2 + t)) * a;\n  }, [t, f, a])\n\n  const count = 100\n  const sep = 3\n  let positions = useMemo(() => {\n    let positions = []\n\n    for (let xi = 0; xi < count; xi++) {\n      for (let zi = 0; zi < count; zi++) {\n        let x = sep * (xi - count / 2);\n        let z = sep * (zi - count / 2);\n        let y = graph(x, z);\n        positions.push(x, y, z);\n      }\n    }\n\n    return new Float32Array(positions);\n  }, [count, sep, graph])\n\n  useFrame(() => {\n    t += 15\n    \n    const positions = bufferRef.current.array;\n\n    let i = 0;\n    for (let xi = 0; xi < count; xi++) {\n      for (let zi = 0; zi < count; zi++) {\n        let x = sep * (xi - count / 2);\n        let z = sep * (zi - count / 2);\n\n        positions[i + 1] = graph(x, z);\n        i += 3;\n      }\n    }\n\n    bufferRef.current.needsUpdate = true;\n  })\n\n  return (\n    <points>\n      <bufferGeometry attach=\"geometry\">\n        <bufferAttribute\n          ref={bufferRef}\n          attachObject={['attributes', 'position']}\n          array={positions}\n          count={positions.length / 3}\n          itemSize={3}\n        />\n      </bufferGeometry>\n\n      <pointsMaterial\n        attach=\"material\"\n        map={imgTex}\n        color={AAFF00}\n        size={0.5}\n        sizeAttenuation\n        transparent={false}\n        alphaTest={0.5}\n        opacity={1.0}\n      />\n    </points>\n  );\n}\n\nfunction AnimationCanvas() {\n  return (\n    <Canvas\n      colorManagement={false}\n      camera={{ position: [100, 10, 0], fov: 75 }}\n    >\n      <Suspense fallback={null}>\n        <Points />\n      </Suspense>\n      <CameraControls/>\n    </Canvas>\n  );\n}\n\n\nfunction App() {\n  return (\n    <div className=\"anim\">\n      <Suspense fallback={<div>Loading...</div>}>\n        <AnimationCanvas />\n      </Suspense>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}